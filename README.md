# Diet Recommendation Engine using Flask and KMeans

## Project Overview
This project is a machine learning-based diet recommendation system that generates personalized meal plans using user attributes and food datasets. It uses **Flask** for backend API development and **KMeans clustering** for nutrient-based meal recommendations. The system provides **breakfast, lunch, and dinner recommendations** tailored to the user's calorie requirements and fitness goals.

The engine calculates a user’s **BMR (Basal Metabolic Rate)** and **TDEE (Total Daily Energy Expenditure)** based on age, height, weight, activity level, and body type. Based on the user's goal (`weight_loss`, `weight_gain`, or `maintain`), it determines daily calorie requirements and distributes calories across meals.

## Features
- Personalized meal recommendations for breakfast, lunch, and dinner.
- BMR and TDEE calculations based on user characteristics.
- Goal-based calorie adjustment for weight loss, weight gain, or maintenance.
- KMeans clustering ensures diverse, nutrient-balanced food options.
- Automatically generates image links for food items if missing.
- Clean JSON API response suitable for frontend integration.
- Uses CSV files as datasets, making the system easily extendable.

## How the System Works

### 1. User Input
The user provides:  
- Age  
- Height  
- Weight  
- Activity level  
- Body type (`endomorphic`, `ectomorphic`, `mesomorphic`)  
- Goal (`weight_loss`, `weight_gain`, `maintain`)  

Input is received via a **POST request** to the `/recommend` endpoint.

### 2. BMR Calculation
BMR formulas differ based on body type:

| Body Type     | Formula                                   |
|---------------|-------------------------------------------|
| Endomorphic   | 10 × weight + 6.25 × height − 5 × age − 161 |
| Ectomorphic   | 10 × weight + 6.25 × height − 5 × age + 5  |
| Mesomorphic   | 10 × weight + 6.25 × height − 5 × age + 100 |

### 3. TDEE Calculation
Activity multipliers:

| Activity Level     | Multiplier |
|------------------|------------|
| Sedentary         | 1.2        |
| Lightly Active    | 1.375      |
| Moderately Active | 1.55       |
| Very Active       | 1.725      |
| Extra Active      | 1.9        |

Goal adjustment:

| Goal          | Adjustment |
|---------------|------------|
| Weight Loss   | TDEE × 0.8 |
| Weight Gain   | TDEE × 1.2 |
| Maintain      | TDEE × 1.0 |

### 4. Meal Calorie Distribution

| Goal         | Breakfast | Lunch | Dinner |
|--------------|-----------|-------|--------|
| Weight Loss  | 30%       | 40%   | 30%    |
| Weight Gain  | 25%       | 35%   | 40%    |
| Maintain     | 30%       | 40%   | 30%    |

Each meal recommendation consists of **3 food items**.

### 5. KMeans Clustering for Meal Selection
- Nutrient features used: **Calories, Proteins, Carbohydrates, Fats**  
- Clusters are created per meal type.  
- One item from each cluster is selected for diversity.  
- If fewer than required items are available, random items are used as fallback.  
- Image links are autogenerated via Unsplash if missing.

## API Usage

**Endpoint:**  
```http
POST /recommend
Example Request Body:

json
Copy code
{
  "age": 22,
  "height": 170,
  "weight": 65,
  "activity_level": "moderately_active",
  "body_type": "mesomorphic",
  "goal": "maintain"
}
Example Response:

json
Copy code
{
  "Breakfast": [
    {
      "Food_items": "Oatmeal",
      "Calories": 350,
      "Proteins": 12,
      "Carbohydrates": 55,
      "Fats": 8,
      "Link": "https://source.unsplash.com/random/?Oatmeal"
    }
  ],
  "Lunch": [...],
  "Dinner": [...],
  "total_calories": 2450,
  "tdee": 2550
}

**
## Dataset Requirements
Each CSV file must contain the following columns:

Column	Description
Food_items	Name of the food item
Calories	Energy (kcal)
Fats	Total fats
Proteins	Total proteins
Carbohydrates	Total carbohydrates
Link	Image URL (optional)

## Datasets used:

Diet_Dataset.csv

Breakfast_data.csv

Lunch_data.csv

Dinner_data.csv

## Future Improvements
    Add user authentication and long-term tracking.

    Add weekly meal planning.

    Integrate with a frontend (React/Next.js).

    Add dietary restrictions (vegan, vegetarian, diabetic-friendly).

    Store datasets and recommendations in a database.

    Add micro-nutrient based recommendation model.

## Author
    Prasanna Shakya
    Email: 0431ps@gmail.com
    GitHub: https://github.com/ANOT-coder

#License
    This project is available under the MIT License.
